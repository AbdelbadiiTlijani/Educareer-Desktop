<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.shape.Rectangle?>

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="tn.esprit.educareer.controllers.User.AdminDashboardController"
            prefHeight="600.0" prefWidth="900.0"
            style="-fx-background-color: #f5f5f7;"
            fx:id="dashboardPane">

    <!-- Left Sidebar Navigation Panel -->
    <VBox spacing="10" style="-fx-background-color: #2c3e50; -fx-padding: 15;" prefWidth="250"
          AnchorPane.leftAnchor="0.0" AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0">
        <Label text="Admin Dashboard" textFill="WHITE" style="-fx-font-weight: bold;">
            <font>
                <Font name="System Bold" size="20.0" />
            </font>
            <padding>
                <Insets bottom="20" />
            </padding>
        </Label>

        <VBox spacing="5">
            <Label text="MANAGEMENT" textFill="#a7a7a7" style="-fx-font-size: 12;">
                <padding>
                    <Insets top="10" bottom="5" />
                </padding>
            </Label>

            <Button fx:id="viewUserButton" text="Users" onAction="#handleViewUser"
                    style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-size: 14;"
                    prefWidth="220" prefHeight="40">
                <graphic>
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="👥" style="-fx-font-size: 16;" />
                    </HBox>
                </graphic>
            </Button>

            <Button fx:id="viewCompanyEmployeeButton" text="Companies &amp; Employees" onAction="#handleViewCompanyEmployee"
                    style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-size: 14;"
                    prefWidth="220" prefHeight="40">
                <graphic>
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="🏢" style="-fx-font-size: 16;" />
                    </HBox>
                </graphic>
            </Button>

            <Label text="CUSTOMER SERVICE" textFill="#a7a7a7" style="-fx-font-size: 12;">
                <padding>
                    <Insets top="15" bottom="5" />
                </padding>
            </Label>

            <Button fx:id="viewReclamationButton" text="Reclamations" onAction="#handleViewReclamation"
                    style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-size: 14;"
                    prefWidth="220" prefHeight="40">
                <graphic>
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="📋" style="-fx-font-size: 16;" />
                    </HBox>
                </graphic>
            </Button>

            <Label text="EVENTS" textFill="#a7a7a7" style="-fx-font-size: 12;">
                <padding>
                    <Insets top="15" bottom="5" />
                </padding>
            </Label>

            <Button fx:id="viewEventButton" text="View Events" onAction="#handleViewEvent"
                    style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-size: 14;"
                    prefWidth="220" prefHeight="40">
                <graphic>
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="🗓️" style="-fx-font-size: 16;" />
                    </HBox>
                </graphic>
            </Button>

            <Button fx:id="createEventButton" text="Create Event" onAction="#handleCreateEvent"
                    style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-size: 14;"
                    prefWidth="220" prefHeight="40">
                <graphic>
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="➕" style="-fx-font-size: 16;" />
                    </HBox>
                </graphic>
            </Button>
        </VBox>

        <VBox alignment="BOTTOM_LEFT" VBox.vgrow="ALWAYS">
            <Button fx:id="logoutButton" text="Logout" onAction="#handleLogout"
                    style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold;"
                    prefWidth="220" prefHeight="40">
            </Button>
        </VBox>
    </VBox>

    <!-- Main Content Area -->
    <AnchorPane style="-fx-background-color: #f5f5f7; -fx-padding: 20;"
                AnchorPane.topAnchor="0.0" AnchorPane.rightAnchor="0.0"
                AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="250.0">
        <VBox spacing="20" AnchorPane.topAnchor="10.0" AnchorPane.leftAnchor="20.0"
              AnchorPane.rightAnchor="20.0" AnchorPane.bottomAnchor="20.0">

            <Label text="Welcome to Admin Dashboard" style="-fx-font-size: 24; -fx-font-weight: bold;" />

            <HBox spacing="20">
                <!-- Dashboard Stat Card 1 -->
                <StackPane>
                    <Rectangle width="200" height="120" arcWidth="20" arcHeight="20" fill="WHITE">
                        <effect>
                            <DropShadow color="#00000022" radius="5" />
                        </effect>
                    </Rectangle>
                    <VBox alignment="CENTER_LEFT" spacing="10">
                        <padding>
                            <Insets left="15" right="15" />
                        </padding>
                        <Label text="Total Users" style="-fx-font-size: 16; -fx-text-fill: #7f8c8d;" />
                        <Label fx:id="totalUsersLabel" text="248" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #3498db;" />
                        <Label fx:id="userGrowthLabel" text="+12% this month" style="-fx-font-size: 12; -fx-text-fill: #27ae60;" />
                    </VBox>
                </StackPane>

                <!-- Dashboard Stat Card 2 -->
                <StackPane>
                    <Rectangle width="200" height="120" arcWidth="20" arcHeight="20" fill="WHITE">
                        <effect>
                            <DropShadow color="#00000022" radius="5" />
                        </effect>
                    </Rectangle>
                    <VBox alignment="CENTER_LEFT" spacing="10">
                        <padding>
                            <Insets left="15" right="15" />
                        </padding>
                        <Label text="Companies" style="-fx-font-size: 16; -fx-text-fill: #7f8c8d;" />
                        <Label fx:id="totalCompaniesLabel" text="42" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #9b59b6;" />
                        <Label fx:id="companyGrowthLabel" text="+5% this month" style="-fx-font-size: 12; -fx-text-fill: #27ae60;" />
                    </VBox>
                </StackPane>

                <!-- Dashboard Stat Card 3 -->
                <StackPane>
                    <Rectangle width="200" height="120" arcWidth="20" arcHeight="20" fill="WHITE">
                        <effect>
                            <DropShadow color="#00000022" radius="5" />
                        </effect>
                    </Rectangle>
                    <VBox alignment="CENTER_LEFT" spacing="10">
                        <padding>
                            <Insets left="15" right="15" />
                        </padding>
                        <Label text="Reclamations" style="-fx-font-size: 16; -fx-text-fill: #7f8c8d;" />
                        <Label fx:id="totalReclamationsLabel" text="18" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #e74c3c;" />
                        <Label fx:id="reclamationStatusLabel" text="3 new today" style="-fx-font-size: 12; -fx-text-fill: #e67e22;" />
                    </VBox>
                </StackPane>
            </HBox>

            <!-- Quick Access Section -->
            <Label text="Quick Access" style="-fx-font-size: 18; -fx-font-weight: bold; -fx-padding: 10 0 0 0;" />

            <HBox spacing="15">
                <!-- Quick Access Card 1 -->
                <StackPane>
                    <Rectangle width="155" height="100" arcWidth="10" arcHeight="10" fill="#3498db">
                        <effect>
                            <DropShadow color="#00000033" radius="5" />
                        </effect>
                    </Rectangle>
                    <VBox alignment="CENTER" spacing="10">
                        <Label text="👥" style="-fx-font-size: 24; -fx-text-fill: white;" />
                        <Button text="Manage Users" onAction="#handleViewUser"
                                style="-fx-background-color: white; -fx-text-fill: #3498db; -fx-font-weight: bold;" />
                    </VBox>
                </StackPane>

                <!-- Quick Access Card 2 -->
                <StackPane>
                    <Rectangle width="155" height="100" arcWidth="10" arcHeight="10" fill="#9b59b6">
                        <effect>
                            <DropShadow color="#00000033" radius="5" />
                        </effect>
                    </Rectangle>
                    <VBox alignment="CENTER" spacing="10">
                        <Label text="🏢" style="-fx-font-size: 24; -fx-text-fill: white;" />
                        <Button text="View Companies" onAction="#handleViewCompanyEmployee"
                                style="-fx-background-color: white; -fx-text-fill: #9b59b6; -fx-font-weight: bold;" />
                    </VBox>
                </StackPane>

                <!-- Quick Access Card 3 -->
                <StackPane>
                    <Rectangle width="155" height="100" arcWidth="10" arcHeight="10" fill="#e74c3c">
                        <effect>
                            <DropShadow color="#00000033" radius="5" />
                        </effect>
                    </Rectangle>
                    <VBox alignment="CENTER" spacing="10">
                        <Label text="📋" style="-fx-font-size: 24; -fx-text-fill: white;" />
                        <Button text="Reclamations" onAction="#handleViewReclamation"
                                style="-fx-background-color: white; -fx-text-fill: #e74c3c; -fx-font-weight: bold;" />
                    </VBox>
                </StackPane>

                <!-- Quick Access Card 4 -->
                <StackPane>
                    <Rectangle width="155" height="100" arcWidth="10" arcHeight="10" fill="#2ecc71">
                        <effect>
                            <DropShadow color="#00000033" radius="5" />
                        </effect>
                    </Rectangle>
                    <VBox alignment="CENTER" spacing="10">
                        <Label text="🗓️" style="-fx-font-size: 24; -fx-text-fill: white;" />
                        <Button text="Events" onAction="#handleViewEvent"
                                style="-fx-background-color: white; -fx-text-fill: #2ecc71; -fx-font-weight: bold;" />
                    </VBox>
                </StackPane>
            </HBox>

            <!-- NEW BUTTON ADDED: Company & Employees Detailed View -->
            <HBox spacing="15" alignment="CENTER">
                <StackPane>
                    <Rectangle width="300" height="80" arcWidth="10" arcHeight="10" fill="#f39c12">
                        <effect>
                            <DropShadow color="#00000033" radius="5" />
                        </effect>
                    </Rectangle>
                    <VBox alignment="CENTER" spacing="5">
                        <HBox alignment="CENTER" spacing="10">
                            <Label text="🏢" style="-fx-font-size: 20; -fx-text-fill: white;" />
                            <Label text="👥" style="-fx-font-size: 20; -fx-text-fill: white;" />
                        </HBox>
                        <Button fx:id="companyEmployeeDetailedViewButton" text="Company &amp; Employee Detailed View"
                                onAction="#openCompanyEmployeeDetailedView"
                                style="-fx-background-color: white; -fx-text-fill: #f39c12; -fx-font-weight: bold;" />
                    </VBox>
                </StackPane>
            </HBox>

            <!-- Recent Activity Section -->
            <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 10;">
                <effect>
                    <DropShadow color="#00000022" radius="5" />
                </effect>

                <Label text="Recent Activity" style="-fx-font-size: 18; -fx-font-weight: bold;" />

                <HBox fx:id="recentActivity1" style="-fx-padding: 10; -fx-border-color: #f5f5f7; -fx-border-radius: 5;">
                    <Label text="🔔" style="-fx-font-size: 14; -fx-padding: 0 10 0 0;" />
                    <VBox spacing="2" HBox.hgrow="ALWAYS">
                        <Label fx:id="recentActivityText1" text="New user registration: Sarah Johnson" style="-fx-font-size: 14;" />
                        <Label fx:id="recentActivityTime1" text="10 minutes ago" style="-fx-font-size: 12; -fx-text-fill: #7f8c8d;" />
                    </VBox>
                </HBox>

                <HBox fx:id="recentActivity2" style="-fx-padding: 10; -fx-border-color: #f5f5f7; -fx-border-radius: 5;">
                    <Label text="🔔" style="-fx-font-size: 14; -fx-padding: 0 10 0 0;" />
                    <VBox spacing="2" HBox.hgrow="ALWAYS">
                        <Label fx:id="recentActivityText2" text="New reclamation submitted: Order #2541" style="-fx-font-size: 14;" />
                        <Label fx:id="recentActivityTime2" text="35 minutes ago" style="-fx-font-size: 12; -fx-text-fill: #7f8c8d;" />
                    </VBox>
                </HBox>

                <HBox fx:id="recentActivity3" style="-fx-padding: 10; -fx-border-color: #f5f5f7; -fx-border-radius: 5;">
                    <Label text="🔔" style="-fx-font-size: 14; -fx-padding: 0 10 0 0;" />
                    <VBox spacing="2" HBox.hgrow="ALWAYS">
                        <Label fx:id="recentActivityText3" text="New company registered: TechSolutions Inc." style="-fx-font-size: 14;" />
                        <Label fx:id="recentActivityTime3" text="2 hours ago" style="-fx-font-size: 12; -fx-text-fill: #7f8c8d;" />
                    </VBox>
                </HBox>
            </VBox>
        </VBox>
    </AnchorPane>
</AnchorPane>